<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <!-- CSS only -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <!-- JavaScript Bundle with Popper -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div
      id="ram"
      style="
        height: 100px;
        width: 30%;
        /* border: solid 2px rgb(161, 155, 155); */
        display: flex;
        justify-content: center;
        align-items: center;
      "
    >
      <input type="text" id="ExamID" placeholder="Enter your name" />
      <button class="btn-primary w-25 text-center" id="jug" onclick="length()">
        Start
      </button>
    </div>
    <div id="him">
      <h1>CBT Test</h1>
      <p id="names"></p>
      <p id="showme"></p>
      <p id="sho"></p>
    </div>
    <div class="card shadow" id="be">
      <div id="show" class="mb-4 ml-2"></div>
      <div class="d-flex mb-3 justify-content-between">
        <button id="bus" class="btn-info" onclick="control('prev')">
          Previous
        </button>
        <button id="car" class="btn-success" onclick="control('next')">
          Next
        </button>
      </div>
      <div class="text-center">
        <button id="ship" class="btn-danger w-25" onclick="mark()">
          Submit
        </button>
        <button id="train" class="btn-secondary w-25" onclick="again()">
          Retake
        </button>
      </div>
    </div>
  </body>
  <script>
    let candidate;
    him.hidden = true;
    be.hidden = true;
    jug.hidden = false;
    let questions = [
      {
        question: "Who is the most expensive transfer in history of soccer?",
        options: ["Neymar", "Pogba", "Van dijk", "Dembele"],
        answer: "Neymar",
        Chosen_ans: "",
      },
      {
        question: "Which is the largest ocean in the world?",
        options: ["Atlantic", "Indian", "Pacific", "Nile"],
        answer: "Pacific",
        Chosen_ans: "",
      },
      {
        question: "Who holds the record for most Olympic medals ?",
        options: ["Usain Bolt", "Michael Phelps", "Marion Jones", "Tyson Gay"],
        answer: "Michael Phelps",
        Chosen_ans: "",
      },
      {
        question: "Which is the largest stadium in the world?",
        options: ["Wembley", "Maracana", "Stadio Olympico", "San siro"],
        answer: "Maracana",
        Chosen_ans: "",
      },
      {
        question: "What is the fastest animal in the world?",
        options: [
          "Cheetah",
          "Peregrine Falcon",
          "Golden Eagle",
          "Black Marlin",
        ],
        answer: "Peregrine Falcon",
        Chosen_ans: "",
      },
      {
        question: "What is the largest city in Nigeria by land mass?",
        options: ["Kano", "Ibadan", "Minna", "Gusau"],
        answer: "Gusau",
        Chosen_ans: "",
      },
    ];
    let index = 0;
    let score = 0;
    let close;
    let h = 30;

    function display(params) {
      showme.innerHTML = `<p>${index + 1} of 6</p>`;
      let a = questions[index].question;
      show.innerHTML = `<h3>${a}</h3>`;
      shishi();
    }
    display();
    function shishi(params) {
      questions[index].options.forEach(function (b, i) {
        show.innerHTML += `<p class='mt-4 ml-3'><input type='radio' value='${b}'name='rr' id='no'>${questions[index].options[i]}</p>`;
        document.querySelectorAll("#no").forEach(function (bomb) {
          bomb.addEventListener("click", ans);
          if (bomb.value == questions[index].Chosen_ans) {
            bomb.checked = true;
          }
        });
      });
    }
    function control(params) {
      if (params == "next") {
        if (questions[index + 1]) {
          index++;
          display();
        }
      } else {
        if (questions[index - 1]) {
          index--;
          display();
        }
      }
    }
    // function backward(params) {
    //     if (questions[index-1]) {
    //         index--
    //     show.innerHTML="";
    //     display()
    //     }
    // }
    function ans(params) {
      questions[index].Chosen_ans = params.target.value;
    }
    function mark(params) {
      // score = 0;
      questions.forEach((element) => {
        if (element.answer == element.Chosen_ans) {
          score++;
        }
      });
      showme.hidden = true;
      clearInterval(close);
      sho.hidden = true;
      ship.hidden = true;
      bus.hidden = true;
      car.hidden = true;
      names.hidden = true;
      train.hidden = false;

      show.innerHTML = `<h2>Hello ${candidate} your score is ${score}/${questions.length}</h2> `;
    }
    function again(params) {
      // let index =0
      //     show.innerHTML=''
      //     showme.innerHTML=`<p>${index+1} of 6</p>`
      //     show.innerHTML=`<h3>${questions[index].question}</h3>`
      //     questions[index].options.forEach(function(b,i){
      //         show.innerHTML+=`<p class='mt-4 ml-3'><input type='radio' value='${b}'name='rr' id='no'>${questions[index].options[i]}</p>`
      //         document.querySelectorAll('#no').forEach(function(bomb){
      //             Chosen_ans=''
      //             bomb.addEventListener('click',ans)
      //         })
      //     })
      // display()
      //     control()
      // score=0
      // console.log(score);
      // index = 0;
      // control()
      // display()
      // window.location.href='./cbt.html'
      location.reload();
    }

    let f = setTimeout(myalert, 1000);
    function myalert(params) {
      alert("hello Javascript");
    }

    clearTimeout(f);
    // let d=['goat','cow','chicken']
    // d.forEach(function(element,index) {
    //     console.log(element);
    // })

    function length(params) {
      candidate = document.getElementById("ExamID").value;
      if (candidate != "") {
        names.innerHTML = ` <h3 class="text-danger"> Hello ${candidate},</h3>`;
        jug.hidden = true;
        ExamID.hidden = true;
        be.hidden = false;
        him.hidden = false;
        train.hidden = true;
        close = setInterval(function () {
          h--;
          sho.innerHTML = `<p>You have <h2 class="text-info">0${h} </h2>secs left</p>`;
          // console.log(h);
          if (h == 0) {
            clearInterval(close);
            mark();
            sho.hidden = true;
            bus.hidden = true;
            ship.hidden = true;
            // train.hidden=true
            car.hidden = true;
            jug.hidden = true;
          }
        }, 1000);
      } else {
        alert("PLEASE ENTER VALID NAME!!!");
      }
      // location.reload()
    }
  </script>
</html>
